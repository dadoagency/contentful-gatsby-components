import React from "react"
import PropTypes from "prop-types"
import { useMediaQuery } from 'react-responsive'
import { documentToReactComponents } from "@contentful/rich-text-react-renderer"
import Slider from "react-slick"
/*
const test = documentToReactComponents(
  contentfulImages,
  renderOptions
)
 */
const ImageCarouselMobile = ({ title, images }) => {
  const isTabletOrMobile = useMediaQuery({ query: "(max-width: 499px)" })
  const settings = {
    dots: false,
    arrows: true,
    infinite: true,
    speed: 500,
    slidesToShow: 2,
    slidesToScroll: 2,
    centerMode: false,
  }
  return (
    <div className="image-carousel-mobile-wrapper">
      {title ? (
        <div className="image-carousel-mobile-title">{title}</div>
      ) : null}
      <div className="image-carousel-mobile-images-container">
        {isTabletOrMobile ? (
          <Slider {...settings}>
            {images.map((image, index) => (
              <>
                {image.url ? (
                  <a
                    key={`image-carousel-mobile-${index}`}
                    className="image-carousel-link"
                    href={image.url}
                  >
                    <img
                      className="image-carousel-mobile-image"
                      src={image.src}
                      alt={image.title}
                    />
                  </a>
                ) : (
                  <img
                    key={`image-carousel-mobile-${index}`}
                    className="image-carousel-mobile-image"
                    src={image.src}
                    alt={image.title}
                  />
                )}
              </>
            ))}
          </Slider>
        ) : (
          <>
            {images.map((image, index) => (
              <>
                {image.url ? (
                  <a
                    key={`image-carousel-mobile-${index}`}
                    className="image-carousel-link"
                    href={image.url}
                  >
                    <img
                      className="image-carousel-mobile-image"
                      src={image.src}
                      alt={image.title}
                    />
                  </a>
                ) : (
                  <img
                    key={`image-carousel-mobile-${index}`}
                    className="image-carousel-mobile-image"
                    src={image.src}
                    alt={image.title}
                  />
                )}
              </>
            ))}{" "}
          </>
        )}
      </div>
    </div>
  )
}

ImageCarouselMobile.defaultProps = {
  title: '',
  images: [],
}

ImageCarouselMobile.propTypes = {
  title: PropTypes.string,
  images: PropTypes.arrayOf({
    src: PropTypes.string,
    title: PropTypes.string,
    url: PropTypes.string,
  })
}

export default ImageCarouselMobile
